{"config":{"lang":["en","ru"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":""},{"location":"#to-zig-dev-wiki","title":"to Zig Dev Wiki","text":"<p>\ud83d\udcf1 The main idea behind this mini-wiki is to make it easier and faster to get to know the gist   for beginners who want to learn how to make DIY Zigbee devices.</p> <p>\ud83c\udf81 We can help many others by collecting as much useful information as possible in one place.  </p> <p>\u2705 If you have any useful information (link, article, source code, printed circuit board, etc.) that will be relevant,   just make a PR to the main branch or issue to this repository and it will be added.</p> <p>\ud83d\ude4f We would be grateful for any help from the community!</p> <p>\ud83d\udd35 Let's start from the beginning</p>"},{"location":"Begin/","title":"Start","text":""},{"location":"Begin/#iar","title":"IAR","text":"<p>How-to IAR install Apply SDK patch </p>"},{"location":"Begin/#hardware","title":"Hardware","text":"<p>DEV Board used on open source projects DIYRuZ (CHDTECH_DEV) </p>"},{"location":"Begin/#reference-docs","title":"Reference docs","text":"<p>zcl-id zstack-constants </p>"},{"location":"Begin/#coordinators-routers-firmware","title":"Coordinators &amp; routers firmware","text":"<p>Koenkk Egony Jethome </p>"},{"location":"Begin/#collection-of-miscellaneous","title":"Collection of miscellaneous","text":"<p>RU zigbee wiki awesome-zigbee </p>"},{"location":"Begin/IAR_install/","title":"IAR install","text":"<p>Original Russian how-to(OUTDATED VERSION) is without a description of SDK patch applying.  </p> <p>Here you can find machine translation and an additional description of how to apply the SDK patch.  </p>"},{"location":"Begin/IAR_install/#build-zigbee-firmware-from-source","title":"Build Zigbee firmware from source.","text":"<p>In this article, I will try to describe the process of building firmware for Zigbee using the IAR Embedded Workbench\u00ae for 8051 IDE.  </p>"},{"location":"Begin/IAR_install/#foreword","title":"Foreword:","text":"<p>You must immediately answer the question: why not immediately give the firmware? There are many reasons for this:</p> <ol> <li>This is contrary to the philosophy of open source: if you want to tweak something, you will not succeed.  </li> <li>If you find an error/revision/optimization, but the author has abandoned the project for a long time, then without the source code the project will simply \u201cdie\u201d.  </li> <li>If you need to change something very simple, for yourself, even not knowing how to program, you can always figure out which numbers are responsible for what.  </li> <li>When there is open source, and information on how to put everything together, written in an accessible language, there is always an opportunity to experiment with the settings, to figure out what works and how.  </li> </ol> <p>And many other pluses.</p> <p>To demonstrate the installation, I installed a clean system to show you how to do it from scratch.</p>"},{"location":"Begin/IAR_install/#setting-up-the-development-environment","title":"Setting up the development environment","text":"<p>The IAR Embedded Workbench will be used as the development environment, where 8051 is the chip architecture, and not the system version, as you might think.  </p> <p>First, you need IAR version 10.30 download from the link</p> <p></p> <p>We start, you must select the item \"Install IAR Embedded Workbench\u00ae for 8051\"</p> <p></p> <p>When installing IAR, you must select the custom mode:</p> <p></p> <p>and uncheck the Dongle drivers installation</p> <p></p> <p>When trying to start a project, there may be an error like this:</p> <p></p> <p>Therefore, before starting the project, you need to make sure that python is installed. You can check this on the command line:</p> <p><code>python \u2013-version</code> </p> <p>If all is well, it will show the currently installed version of python, as in the example: </p> <p>If not, then go to install python  Install it. Be sure to check the \"add python **** to path\"</p> <p></p>"},{"location":"Begin/IAR_install/#install-git-and-a-simple-client-for-it","title":"Install git and a simple client for it.","text":"<p>go in and download git Install, all checkboxes can be left by default.</p> <p></p> <p>go to the site https://tortoisegit.org/ We download the program depending on the bitness of the system (well, or just choose 32 bit, it does not play any significant role) If necessary, you can download the Russification. I will not do this in this manual.</p> <p></p> <p>Install tortoisegit, after installation, tick the \"Run first start wizard\" (usually it is by default) By default, the path to git.exe will be written, or you need to specify the path yourself.</p> <p></p> <p>You can immediately generate ssh keys \"Generate PuTTy key pair\":</p> <p></p> <p>Press generate, actively move the mouse/press the keys (the person acts as an RNG) After generation, save the \"Save private key\" the public key (in the figure it starts with \"ssh-rsa AA ...\"), copy it to the clipboard (you can also save it if necessary \"Save public key\")</p> <p></p> <p>Go to your git account in the SSH keys section</p> <p>Click \"Add new\" and paste the previously copied public key. </p> <p>Install firmware Z-Stack 3.0.2 - this is an SDK for developing firmware.</p> <p></p> <p>We answer tricky questions, download.</p> <p></p> <p>Install, you can slightly reduce the path to zstack: C:\\Z-Stack 3.0.2. There should be no questions here.</p> <p></p>"},{"location":"Begin/IAR_install/#apply-sdk-patch","title":"Apply SDK patch","text":"<p>After installing the IAR, you should apply the patch to correctly compile the sources.  </p> <p>You can find the patch here </p> <p>How to install:  </p> <ol> <li>Save 0001-Fixes.patch to your Z-stack working directory (C:\\Z-Stack 3.0.2)  </li> <li>Open console at Z-stack working directory  </li> <li>Run <code>git apply 0001-Fixes.patch</code></li> </ol>"},{"location":"Begin/IAR_install/#download-source-code-from-the-repository","title":"Download source code from the repository","text":"<p>An example would be Zigbee CO2 Sensor</p> <p>and select Code, SSH and click on the copy to clipboard icon:</p> <p></p> <p></p> <p>We go to the computer in zstack: C:\\Z-Stack 3.0.2\\Projects\\zstack\\HomeAutomation (if you did not change the path, then first there will be a folder \"Texas Instruments\")</p> <p>right mouse button, \"Git clone ...\"</p> <p>Put the URL address from the clipboard, current directory, be sure to check the recursive checkbox, this will help to pull together the BME280_driver and zstack-lib dependencies</p> <p></p> <p>Success screen:</p> <p></p> <p>The IAR Embedded Workbench can now be launched. Open the project using the Open workspace menu item </p> <p>We find our folder with the downloaded project, then in the CC2530DB folder we find the project file</p> <p></p> <p>Select the correct workspace, DIY_RuZ_[PROJECT NAME] and execute Rebuild All. The profile named CHDTECH_DEV is debugging one and configured for the development board</p> <p></p> <p></p> <p>If you see a bunch of warnings like this:</p> <pre><code>Warning[w6]: Type conflict for external/entry \"putchar\", in module ?printf against external/entry in module ?putchar; types have different memory attributes\n</code></pre> <p>JUST IGNORE THEM</p> <p>After successfull compilation firmaware files will be located in firmwares folder</p>"},{"location":"Begin/cc-tool/","title":"Cc tool","text":"<p>Compile cc-tool on Apple Silicon (M1/M2/M3)</p> <p>to erase/read/write flash memory of TI CC2530</p>"},{"location":"Begin/cc-tool/#prepare","title":"Prepare","text":"<pre><code>brew install autoconf automake libusb boost pkgconfig libtool ##install needed tools to compile the tool :-D\ngit clone https://github.com/dashesy/cc-tool.git\ncd cc-tool\\\n</code></pre>"},{"location":"Begin/cc-tool/#build","title":"Build","text":"<pre><code>CC=/usr/bin/clang \\\nCXX=/usr/bin/clang++ \\\nCPPFLAGS=-I/usr/local/include \\\nLDFLAGS=-I/usr/local/include \\\n ./bootstrap\n\nCC=/usr/bin/clang \\\nCXX=/usr/bin/clang++ \\\nCPPFLAGS=-I/usr/local/include \\\nCXXFLAGS=\"-std=c++0x -arch x86_64\" \\\nLDFLAGS=\"-I/usr/local/include -lboost_system\" \\\nLIBUSB_CFLAGS=-I/usr/local/include/libusb-1.0 \\\nLIBUSB_LIBS=\"-L/usr/local/lib -lusb-1.0\" \\\n ./configure\n\nmake clean ; make\n</code></pre>"},{"location":"Begin/cc-tool/#use","title":"Use","text":"<pre><code>./cc-tool -e -w file.hex \n</code></pre> <p>Original post https://gist.github.com/kidpixo/ef1a26ae953e3939a4eebe1b6fd2f07c</p>"},{"location":"Etc/","title":"Other stuff","text":""},{"location":"Etc/#hardware","title":"Hardware","text":"<p>Relay starting currents Fake DS18B20</p>"},{"location":"Etc/#zigbee-herdsman-converters","title":"zigbee-herdsman-converters","text":"<p>devices.js exposes.js fromZigbee.js toZigbee.js </p>"},{"location":"Etc/#unsorted-links","title":"Unsorted links","text":""},{"location":"Etc/#articles","title":"Articles","text":"<p>CC2530 timer configuration for 32MHz cc2530 timer 1 free mode (query method) cc2530 timer 1 PWM output cc2530 timer 3 PWM</p>"},{"location":"Etc/#code-files","title":"Code files","text":"<p>ZStack-CC2530-2.3.0-1.4.0.zip &gt; hal_dma.h </p>"},{"location":"Etc/#around-zigbee-links","title":"Around Zigbee links","text":""},{"location":"Etc/#projects","title":"Projects","text":"Smart nursing home project"},{"location":"Projects/","title":"Projects","text":""},{"location":"Projects/#cc2530","title":"CC2530","text":""},{"location":"Projects/#diyruz","title":"DIYRuZ","text":"<ul> <li>AirSense *HARD  </li> <li>flower *HARD  </li> <li>Battery Button </li> <li>geiger *HARD  </li> <li>freepad  *HARD  </li> <li>relay with ds18b20 </li> </ul>"},{"location":"Projects/#github","title":"GitHub","text":"<ul> <li>ZigUP - Relais, Switch, Sensor and Router *HARD  </li> <li>wireless lcd sensor network </li> <li>An open source ZigBee plug for your own smart home *HARD   </li> <li>Coordinator and End Devices, Modbus interface </li> <li>door lock-lower computer-door lock base station </li> <li>LEHome Smart Home Zigbee Sensor Module Code </li> <li>Bunch of sample apps <ul> <li>SmartPower</li> <li>RemoteControl</li> <li>TempHumiSensor </li> </ul> </li> <li>UART not ZStack Electric Fan </li> </ul>"},{"location":"Projects/#ti","title":"TI","text":"<ul> <li>Simple Dimmable LED Light </li> </ul>"},{"location":"Projects/#other-chips","title":"Other chips","text":"Chip Project nrf52840 RGBW dimmer project  JN5169  Better firmware Xiaomi Aqara switches JN5169  Xiaomi round button with bind JN5168  Light Link, multiple dimmable light endpoints JN5169 Zigbee \ud83d\udc1d Router for Xiaomi DGNWG05LM and Aqara ZHWG11LM gateways JN5169 Zigbee \ud83d\udc1d Router for LM15-SP-WM module"},{"location":"Projects/#other-projects","title":"Other projects","text":"<p>Xiaomi Gateway Hack Xiaomi Power Plug Hack </p>"},{"location":"Projects/#zll_lights","title":"ZLL_Lights","text":"<p>Article Github </p>"},{"location":"Projects/#zigws2812","title":"ZigWS2812","text":"<p>Article Github </p>"}]}